{% load static %}
<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <!-- Mobile Specific Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'img/fav.png' %}">
    <!-- Author Meta -->
    <meta name="author" content="colorlib">
    <!-- Meta Description -->
    <meta name="description" content="Interior design application">
    <!-- Meta Keywords -->
    <meta name="keywords" content="interior design, chatbot, AI">
    <!-- Meta Character Set -->
    <meta charset="UTF-8">
    <!-- Site Title -->
    <title>Interior Design Chatbot</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/linearicons.css' %}">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
    <link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    
    <!-- Custom Styles -->
    <style>
         .chat-container {
        max-width: 800px;
        margin: 50px auto;
        background: #f9f9f9;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .chat-header {
        background-color: #c6b069;
        padding: 20px;
        text-align: center;
        color: white;
        font-size: 1.5rem;
    }
    .chat-body {
        height: 400px;
        overflow-y: auto;
        padding: 20px;
        background: #fff;
    }
    .message {
        margin-bottom: 20px;
        display: flex;
        align-items: flex-start;
    }
    .message.user {
        justify-content: flex-end;
    }
    .message.bot {
        justify-content: flex-start;
    }
    .message .text {
        max-width: 70%;
        padding: 10px 15px;
        border-radius: 15px;
        word-wrap: break-word;
    }
    .message.user .text {
        background: #c6b069;
        color: #fff;
        border-top-right-radius: 0;
    }
    .message.bot .text {
        background: #e9ecef;
        color: #000;
        border-top-left-radius: 0;
    }
    .chat-footer {
        padding: 20px;
        background: #f9f9f9;
        border-top: 1px solid #ddd;
    }
    .chat-footer form {
        display: flex;
        align-items: center;
    }
    .chat-footer input {
        flex: 1;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin-right: 10px;
    }
    .chat-footer button {
        background-color: #c6b069;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
    }
    .chat-footer button:hover {
        background-color: #b59a5d;
    }

    #home {
    padding: 70px 0;
}

#home h1 {
    font-size: 2.5rem;
    color: #ffffff;
    margin-bottom: 20px;
}
/*Remove this if not necessary*/
#home p {
    font-size: 1.1rem;
    color: #666;
}

#home .primary-btn {
    background-color: #c6b069;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    color: white;
    cursor: pointer;
}

#home .primary-btn:hover {
    background-color: #b59a5d;
}
    </style>
</head>

<body>
    <!-- Header Section -->
    <header id="header" id="home">
        <div class="header-top">
            <div class="container">
                <div class="row">
                    <!--				  			<div class="col-lg-6 col-sm-6 col-4 header-top-left no-padding">
                        <a href="tel:+953 012 3654 896">+953 012 3654 896</a>
                        <a href="mailto:support@colorlib.com">support@colorlib.com</a>					  
                    </div>
                    <div class="col-lg-6 col-sm-6 col-8 header-top-right no-padding">
                        <ul>
                          <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                          <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                          <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
                          <li><a href="#"><i class="fa fa-behance"></i></a></li>
                        </ul>			
                    </div>-->
                </div>			  					
            </div>
      </div>
      <div class="container main-menu">
          <div class="row align-items-center justify-content-between d-flex">
            <div id="logo">
              <a href="{% url 'front_page' %}"><img src="{% static 'img/logo5.png' %}" alt="" title="" /></a>
            </div>
            <nav id="nav-menu-container">
              <ul class="nav-menu">
                  <li class="menu-active"><a href="{% url 'front_page' %}">Home</a></li>
                  <li><a href="{% url 'promte_page' %}">Create Desgin From Promte</a></li>
                  <li><a href="{% url 'image_style_page' %}">Image Style Transfer</a></li>
                  <li><a href="{% url 'chatbot_page' %}">ChatBot</a></li>
                  <li><a href="http://localhost:8000/">Experience 3D</a></li>
                  <!--<li><a href="{% url 'interior_nav' %}">Interior Walkthrough</a></li>-->
                  <li><a href="{% url 'user_designs' %}">History</a></li>

                  <li><a href="{% url 'logout' %}">Logout</a></li>
                </ul>
            </nav><!-- #nav-menu-container -->		    		
          </div>
      </div>
    </header><!-- #header -->

    <section class="banner-area relative" id="home" style="padding-top: 1in;">
		<div class="overlay overlay-bg"></div>
		<div class="container">
			<div class="row fullscreen d-flex justify-content-center align-items-center">
			<div class="banner-content col-lg-9 col-md-12 justify-content-center">
                <h1> Ask Your Interior Design Assistant </h1>
                <p class="text-white mx-auto">
                    Whether you're exploring styles, color palettes, or need expert advice â€” our chatbot is here to help you redesign your space effortlessly.
                  </p>	
    
    
    
                <section class="chat-container">
        <div class="chat-header">
            Chat with Interior AI
        </div>
        <div class="chat-body" id="chatBody">
            <div class="message bot" style="text-align: left;">
                <div class="text">Hello! How can I assist you with your interior design needs today?</div>
            </div>
        </div>
        <div class="chat-footer">
            <form id="chatForm" method="POST" action="">
                {% csrf_token %}
                <input type="text" name="message" id="userMessage" placeholder="Type your message..." required>
                <button type="submit">Send</button>
            </form>
        </div>
    </section>
				</div>
				
</div>
</div>
</section>


    
   	<!-- start footer Area -->		
<footer class="footer-area section-gap">
	<div class="container">
		<div class="row">
			<div class="col-lg-5 col-md-6 col-sm-6">
				<div class="single-footer-widget">
					<h6>About Us</h6>
					<p>
						At DecoDream, we specialize in converting your 2D floor plans into immersive, accurate 3D visualizations. Our unique approach combines cutting-edge technology with user-friendly chatbot customization, making the process of transforming your ideas into tangible designs seamless and interactive.
					</p>
					
				</div>
			</div>
							
			<div class="col-lg-2 col-md-6 col-sm-6 social-widget">
				<div class="single-footer-widget">
					<h6>Contact</h6>
					<p>Email: decodream4202gmail.com</p>
					<!--<div class="footer-social d-flex align-items-center">
						<a href="#"><i class="fa fa-facebook"></i></a>
						<a href="#"><i class="fa fa-twitter"></i></a>
						<a href="#"><i class="fa fa-dribbble"></i></a>
						<a href="#"><i class="fa fa-behance"></i></a>
					</div>-->
				</div>
			</div>							
		</div>
	</div>
</footer>	
<!-- End footer Area -->
    <!-- JavaScript -->
    <script src="{% static 'js/vendor/jquery-2.2.4.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="{% static 'js/vendor/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/easing.min.js' %}"></script>
    <script src="{% static 'js/hoverIntent.js' %}"></script>
    <script src="{% static 'js/superfish.min.js' %}"></script>
    <script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
	<script src="{% static 'js/vendor/jquery-2.2.4.min.js' %}"></script>
<script>
    const chatForm = document.getElementById('chatForm');
    const chatBody = document.getElementById('chatBody');
    const userMessageInput = document.getElementById('userMessage');

    // Event listener for chat form submission
    chatForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const userMessage = userMessageInput.value.trim();
        if (!userMessage) return;

        // Display the user's message
        appendMessage('user', userMessage);

        // Clear input
        userMessageInput.value = '';

        // Show loading indicator
        appendMessage('bot', 'Typing...');

        try {
            // Send the message to the backend and get a response
            const response = await fetch('{% url "chatbot_api" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}',
                },
                body: JSON.stringify({ message: userMessage }),
            });

            const data = await response.json();

            // Remove the loading indicator
            removeLastMessage();

            // Display bot's reply
            const botMessage = data.reply || 'Sorry, I couldnâ€™t understand that.';
            appendMessage('bot', botMessage);

        } catch (error) {
            // Remove the loading indicator
            removeLastMessage();

            // Display error message
            appendMessage('bot', 'Something went wrong. Please try again later.');
        }
    });

    // Function to append messages to the chat body
    function appendMessage(sender, text) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('message', sender);
        const textDiv = document.createElement('div');
        textDiv.classList.add('text');
        textDiv.textContent = text;
        messageDiv.appendChild(textDiv);
        chatBody.appendChild(messageDiv);
        chatBody.scrollTop = chatBody.scrollHeight; // Auto-scroll to the latest message
    }

    // Function to remove the last message (used for removing the loading indicator)
    function removeLastMessage() {
        const messages = chatBody.getElementsByClassName('message');
        if (messages.length > 0) {
            chatBody.removeChild(messages[messages.length - 1]);
        }
    }
</script>
</body>

</html>
